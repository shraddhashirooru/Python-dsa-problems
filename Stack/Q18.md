# Question 18: Trapping rain water:

## Given n non-negative integers representing an elevation map where the width of each bar is 1, compute how much water it can trap after raining.
<img width="644" height="252" alt="image" src="https://github.com/user-attachments/assets/4dd67e02-1fd1-44a7-bf83-db136ec838ae" />

### Example 1:
 
Input: height = [0,1,0,2,1,0,1,3,2,1,2,1]

Output: 6

Explanation: The above elevation map (black section) is represented by array [0,1,0,2,1,0,1,3,2,1,2,1]. In this case, 6 units of rain water (blue section) are being trapped.

Example 2:

Input: height = [4,2,0,3,2,5]

Output: 9

## ✅Python code 1:

```
class Solution:
    def trap(self, height: List[int]) -> int:
        stack=[]
        n=len(height)
        a=[0]*n
        for i in range(n-1,-1,-1):
            while stack and stack[-1]<height[i]:
                stack.pop()
            if not stack:
                a[i]=-1
                stack.append(height[i])
            else:
                a[i]=stack[-1]
        stack1=[]
        count=0
        for i in range(n):
            if not stack1:
                stack1.append([height[i],a[i]])
            else:
                if stack1[-1][0]>height[i] and a[i]!=-1:
                    count=count+min(max(a[i],stack1[-1][1]),stack1[-1][0])-height[i]
                else:
                    stack1.append([height[i],a[i]])
        return count
```

---
## ✅Python code 2 (optimized):

```
class Solution:
    def trap(self, height: List[int]) -> int:
        stack=[]
        n=len(height)
        a=[0]*n
        for i in range(n-1,-1,-1):
            while stack and stack[-1]<=height[i]:
                stack.pop()
            if not stack:
                a[i]=-1
                stack.append(height[i])
            else:
                a[i]=stack[-1]

        stack1=[]
        b=[0]*n
        for i in range(n):
            while stack1 and stack1[-1]<=height[i]:
                stack1.pop()
            if not stack1:
                b[i]=-1
                stack1.append(height[i])
            else:
                b[i]=stack1[-1]
        count=0
        for i in range(n):
            if a[i]!=-1 and b[i]!=-1:
                count=count+min(a[i],b[i])-height[i]
        return count
```
